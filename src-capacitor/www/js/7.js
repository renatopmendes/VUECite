(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"2a70":function(e,t,a){},8808:function(e,t,a){"use strict";var i=a("2a70"),o=a.n(i);o.a},caed:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page-container",[a("q-page",{class:["text-white","bg-"+e.color.colors[e.color.index]+"-10"],on:{click:e.focusOnDiv}},[a("q-toolbar",{staticClass:"z-max"},[a("q-btn",{attrs:{dense:"",flat:"","aria-label":"Back",icon:"arrow_back"},on:{click:function(t){return t.stopPropagation(),e.$router.go(-1)}}}),a("q-space"),a("div",{staticClass:"row"},[a("q-btn",{attrs:{dense:"",flat:"","aria-label":"Palette",icon:"palette"},on:{click:function(t){e.color.index=e.color.colors[e.color.index+1]?e.color.index+1:0}}}),a("q-btn",{attrs:{dense:"",flat:"","aria-label":"Text",icon:"text_format"},on:{click:function(t){e.family.index=e.family.families[e.family.index+1]?e.family.index+1:0}}})],1),a("q-space"),a("q-btn",{attrs:{dense:"",round:"",color:"positive","aria-label":"Send",icon:"send"},on:{click:function(t){return t.stopPropagation(),e.send(t)}}})],1),a("div",{staticClass:"q-px-xs fit absolute-top-left column justify-center items-center"},[e.media.youtube?a("q-video",{attrs:{src:"https://www.youtube.com/embed/"+e.media.youtube+"?controls=0&fs=0&rel=0&showinfo=0"}}):a("div",{staticClass:"content-editable full-width text-center"},[a("div",{class:e.media.textSize,style:{"font-family":e.family.families[e.family.index]},attrs:{contenteditable:""},on:{paste:function(t){return e.paste(t)},input:function(t){return e.setInput(t)}}})])],1),a("q-btn",{staticClass:"absolute-bottom q-ml-sm q-mb-sm z-max",staticStyle:{"background-color":"rgba(0, 0, 0, 0.3)"},attrs:{dense:"","aria-label":"Commentary",icon:"edit"},on:{click:function(t){return t.stopPropagation(),e.showFooter(t)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showcommentary,expression:"showcommentary"}],staticClass:"fixed-bottom q-py-xs q-pl-xl q-pr-sm footer-commentary"},[a("q-input",{attrs:{dark:"",dense:"",rounded:"",standout:"",autogrow:"",placeholder:"Adicione uma mensagem...",maxlength:"255"},on:{click:function(e){return e.stopPropagation(),function(){return!0}()}},scopedSlots:e._u([{key:"append",fn:function(){return[e.media.commentary?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:function(t){t.stopPropagation(),e.media.commentary=null,e.$el.querySelector(".footer-commentary textarea").focus()}}}):e._e()]},proxy:!0}]),model:{value:e.media.commentary,callback:function(t){e.$set(e.media,"commentary",t)},expression:"media.commentary"}})],1)],1)],1)},o=[],s=(a("5319"),a("498a"),a("51b0")),n={name:"TextMessage",data:()=>({media:{color:null,family:null,message:null,textSize:"text-h3",commentary:null},color:{index:0,colors:["grey","red","blue-grey","pink","green","brown","purple","deep-orange","light-green","deep-purple","orange","teal","indigo","cyan","amber","blue","yellow","light-blue","lime"]},family:{index:0,families:["Roboto","Lobster","Pacifico","Great Vibes","Architects Daughter"]},showcommentary:!1}),mounted(){this.focusOnDiv()},methods:{focusOnDiv:function(){this.$el.querySelector("[contenteditable]")&&(this.$el.querySelector("[contenteditable]").focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd())},paste:function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)},setInput:function(e){if(e.target.innerText.length<=512){this.media.message=e.target.innerText;const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/im,a=this.media.message.match(t);if(a&&11===a[2].length)this.$set(this.media,"youtube",a[2]),this.media.message=null,this.media.textSize=null;else{const e=this.media.message.length;let t="text-subtitle1";e<=60?t="text-h3":e>60&&e<=120?t="text-h4":e>120&&e<=180?t="text-h5":e>180&&e<=240&&(t="text-h6"),this.$set(this.media,"textSize",t)}}else this.$el.querySelector("[contenteditable]").innerText=this.media.message,this.$q.notify({type:"negative",position:"top",message:"Limite de 255 caracteres"})},showFooter:function(){this.showcommentary=!this.showcommentary,this.showcommentary&&setTimeout(()=>{this.$el.querySelector(".footer-commentary textarea").focus()},50)},send:function(){this.media.youtube?(this.$q.loading.show(),this.media.commentary&&this.media.commentary.replace(/\s/g,"").length>0?this.$set(this.media,"commentary",this.media.commentary.replace(/\s{2,}/g," ").trim()):this.media.commentary=null,this.$axios.post("post/page/"+this.$route.params.pageId,{youtube:this.media.youtube,commentary:this.media.commentary}).then(e=>{s["a"].notify(this.$route.params.pageTopic,{title:this.$route.params.pageName,body:this.media.commentary||"Youtube vídeo",image:`https://img.youtube.com/vi/${this.media.youtube}/mqdefault.jpg`,sound:"default"}),this.$router.replace({path:"page",query:{id:this.$route.params.pageId}})})):this.media.message&&this.media.message.replace(/\s/g,"").length>0?(this.$q.loading.show(),this.media.color=this.color.colors[this.color.index],this.media.family=this.family.families[this.family.index],this.$set(this.media,"message",this.media.message.trim()),this.media.commentary&&this.media.commentary.replace(/\s/g,"").length>0?this.$set(this.media,"commentary",this.media.commentary.replace(/\s{2,}/g," ").trim()):this.media.commentary=null,this.$axios.post("post/page/"+this.$route.params.pageId,this.media).then(e=>{s["a"].notify(this.$route.params.pageTopic,{title:this.$route.params.pageName,body:this.media.message,sound:"default"}),this.$router.replace({path:"page",query:{id:this.$route.params.pageId}})})):this.$q.notify({type:"negative",position:"top",message:"Texto é obrigatório."})}}},r=n,m=(a("8808"),a("2877")),c=a("09e3"),l=a("9989"),u=a("65c6"),d=a("9c40"),h=a("2c91"),p=a("6ac0"),g=a("27f9"),y=a("0016"),f=a("eebe"),b=a.n(f),x=Object(m["a"])(r,i,o,!1,null,"208c46bf",null);t["default"]=x.exports;b()(x,"components",{QPageContainer:c["a"],QPage:l["a"],QToolbar:u["a"],QBtn:d["a"],QSpace:h["a"],QVideo:p["a"],QInput:g["a"],QIcon:y["a"]})}}]);