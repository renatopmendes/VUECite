(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"54dc":function(a,t,e){"use strict";var i=e("a738"),s=e.n(i);s.a},a386:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("q-header",[e("q-toolbar",{staticClass:"bg-dark"},[e("q-btn",{attrs:{dense:"",flat:"","aria-label":"Back",icon:"arrow_back"},on:{click:function(t){return a.$router.go(-1)}}}),e("q-space"),a.page.id?e("div",{staticClass:"text-body1 ellipsis"},[a._v("\n        "+a._s(a.page.name)+"\n      ")]):e("div",[a._v("\n        Nova página\n      ")]),e("q-space"),e("q-btn",{attrs:{dense:"",flat:"","aria-label":"Home",icon:"home",to:"/"}})],1)],1),e("q-page-container",[a.crop.overlay?e("div",{staticClass:"bg-dark fit fixed-top text-white z-max"},[e("q-toolbar",{staticClass:"absolute z-max"},[e("q-btn",{attrs:{dense:"",flat:"","aria-label":"Back",icon:"arrow_back"},on:{click:function(t){a.crop.overlay=!1}}})],1),e("div",{staticClass:"fit column justify-center items-center"},[e("vue-cropper",{ref:"cropper",staticClass:"crop-avatar",attrs:{"drag-mode":"move",src:a.crop.file,"auto-crop-area":1,"aspect-ratio":1,background:!1,"min-crop-box-width":80,"view-mode":2}}),e("q-btn",{staticClass:"q-mt-lg",attrs:{round:"",color:"positive","aria-label":"Crop",icon:"crop"},on:{click:a.cropped}})],1)],1):e("div",{staticClass:"q-my-md q-mx-lg row justify-center"},[e("div",{staticClass:"text-center full-width"},[e("q-btn",{staticClass:"z-top",staticStyle:{margin:"60px -20px 0 0"},attrs:{dense:"",round:"",color:"secondary","aria-label":"Edit",icon:"attach_file"},on:{click:function(t){a.$el.querySelector(".input-galeria").click()}}}),e("avatar",{attrs:{id:a.page.id,avatar:a.page.avatar,size:80,download:"Data"}}),e("q-btn",{staticStyle:{margin:"60px 0 0 -20px"},attrs:{dense:"",round:"",color:"secondary","aria-label":"Camera",icon:"photo_camera"},on:{click:function(t){a.$el.querySelector(".input-camera").click()}}}),e("q-form",{staticClass:"q-mt-xl",on:{submit:a.send}},[e("q-input",{attrs:{filled:"",required:"",minlength:"3",maxlength:"32",label:"Nome da página"},model:{value:a.page.name,callback:function(t){a.$set(a.page,"name",t)},expression:"page.name"}}),e("q-input",{staticClass:"q-my-md",attrs:{filled:"",type:"url",label:"Site externo"},model:{value:a.page.link,callback:function(t){a.$set(a.page,"link",t)},expression:"page.link"}}),e("q-input",{attrs:{autogrow:"",filled:"",label:"Sobre a página",maxlength:"2056"},model:{value:a.page.about,callback:function(t){a.$set(a.page,"about",t)},expression:"page.about"}}),e("div",{staticClass:"q-my-xl"},[e("q-btn",{attrs:{round:"","aria-label":"OK",color:"positive",icon:"done",type:"submit"}})],1)],1)],1)]),a.page.id&&a.countPages>1?e("div",{staticClass:"q-mt-xl absolute text-negative text-center full-width",staticStyle:{bottom:"-20px"},on:{click:a.removePage}},[e("q-icon",{staticStyle:{"font-size":"1.2em"},attrs:{name:"delete"}}),a._v("\n      Remover página\n    ")],1):a._e(),e("input",{staticClass:"input-galeria hidden",attrs:{type:"file",accept:"image/*"},domProps:{value:a.crop.value},on:{change:a.toggle}}),e("input",{staticClass:"input-camera hidden",attrs:{type:"file",accept:"image/*",capture:"camera"},domProps:{value:a.crop.value},on:{change:a.toggle}})])],1)},s=[],o=(e("a434"),e("5319"),e("498a"),e("ddb0"),e("2b3d"),e("df3a")),n=e("95c3"),r=e.n(n),l=(e("6107"),e("81aa")),c={name:"NewPage",components:{Avatar:o["a"],VueCropper:r.a},data:()=>({countPages:0,page:{name:null,link:null,about:null,avatar:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAAAAAA6fptVAAAACklEQVR4nGOSBQAAIwAgnmUiuwAAAABJRU5ErkJggg=="},crop:{overlay:!1,file:null,value:null},oldAvatar:null}),created(){if(this.$route.query.id){const a=this.$storage.getObj("account").pages;this.countPages=a.length,this.page=a.filter(a=>a.id===Number(this.$route.query.id))[0],this.oldAvatar=this.page.avatar}},methods:{toggle:function(a){const t=URL.createObjectURL(a.target.files[0]);this.crop.file=t,this.crop.overlay=!0,setTimeout(()=>{URL.revokeObjectURL(t)},5e3)},cropped:function(){const a=this.$refs.cropper.getCroppedCanvas({width:80,imageSmoothingQuality:"medium"});this.$set(this.page,"avatar",a.toDataURL("image/jpeg")),this.crop.overlay=!1,this.crop.value=null},send:function(){if(this.$q.loading.show(),this.$set(this.page,"name",this.page.name.replace(/\s{2,}/g," ").trim()),this.page.about&&this.page.about.replace(/\s/g,"").length>0?this.$set(this.page,"about",this.page.about.replace(/\s{2,}/g," ").trim()):this.page.about=null,this.page.id){const a=JSON.parse(JSON.stringify(this.page));this.crop.file||delete a.avatar,this.$axios.put("page/"+this.page.id,a).then(a=>{const t=a.data.page,e=this.$storage.getObj("account");e.pages[e.pages.findIndex(a=>a.id===t.id)]={id:t.id,name:t.name,avatar:t.avatar,link:t.link,about:t.about},this.$storage.setObj("account",e),this.crop.file&&l["a"].deleteFile(this.page.id+"/"+this.oldAvatar,"Data"),this.crop.file=null,this.$router.go(-1)})}else this.$axios.post("page",this.page).then(a=>{const t=a.data.page,e=this.$storage.getObj("account");e.pages[e.pages.length]={id:t.id,name:t.name,avatar:t.avatar,link:t.link,about:t.about},this.$storage.setObj("account",e),this.crop.file=null,this.$router.go(-1)})},removePage:function(){this.$q.dialog({message:"Deseja realmente excluir esta página?",cancel:"Cancelar",ok:"Confirmar"}).onOk(()=>{this.$axios.delete("page/"+this.page.id).then(a=>{const t=this.$storage.getObj("account");t.pages.splice(t.pages.findIndex(a=>a.id===this.page.id),1),this.$storage.setObj("account",t),this.$router.replace("/configurations")})})}}},p=c,g=(e("54dc"),e("2877")),u=e("e359"),d=e("65c6"),h=e("9c40"),m=e("2c91"),b=e("09e3"),v=e("0378"),f=e("27f9"),k=e("0016"),A=e("eebe"),q=e.n(A),x=Object(g["a"])(p,i,s,!1,null,null,null);t["default"]=x.exports;q()(x,"components",{QHeader:u["a"],QToolbar:d["a"],QBtn:h["a"],QSpace:m["a"],QPageContainer:b["a"],QForm:v["a"],QInput:f["a"],QIcon:k["a"]})},a738:function(a,t,e){}}]);