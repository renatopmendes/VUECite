(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"2ff9":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("q-header",[o("q-toolbar",{staticClass:"bg-dark"},[o("q-btn",{attrs:{dense:"",flat:"","aria-label":"Back",icon:"arrow_back"},on:{click:function(t){e.showCarousel?e.showCarousel=!1:e.$router.go(-1),e.$refs.grider.showCarousel=!1}}}),o("q-space"),o("div",{staticClass:"text-body1 ellipsis"},[e._v("\n        "+e._s(e.page?e.page.name:"Carregando...")+"\n      ")]),o("q-space"),o("q-btn",{attrs:{dense:"",flat:"",icon:"more_vert"}},[o("q-menu",[o("q-list",[e.following?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[o("q-item-section",{on:{click:function(t){return e.follow(!1)}}},[e._v("Deixar de seguir")])],1):e._e(),e.following&&e.following.notification?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[o("q-item-section",{on:{click:function(t){return e.notify(!1)}}},[e._v("Não receber notificações")])],1):e._e(),e.following&&!e.following.notification?o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[o("q-item-section",{on:{click:function(t){return e.notify(!0)}}},[e._v("Receber notificações")])],1):e._e(),o("q-item",[o("q-item-section",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.denounce(e.page.id)}}},[e._v("\n                Denunciar\n              ")])],1)],1)],1)],1)],1)],1),e.page?o("q-page-container",[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.showCarousel,expression:"!showCarousel"}],staticClass:"q-my-md q-mx-xl text-center"},[o("avatar",{attrs:{id:e.page.id,avatar:e.page.avatar,size:80,download:e.following?"Cache":null}}),e.page.link?o("div",{staticClass:"q-mt-sm text-body2 text-weight-light",on:{click:e.goUrl}},[o("q-icon",{attrs:{name:"link"}}),e._v("\n        "+e._s(e.page.link)+"\n      ")],1):e._e(),e.page.views?o("div",{staticClass:"q-mt-xs text-body2 text-weight-light"},[e._v("\n        "+e._s(e.page.views>1e7?Math.floor(e.page.views/1e6)+"M":e.page.views>1e4?Math.floor(e.page.views/1e3)+"K":e.page.views)+" visualizações\n      ")]):e._e(),o("div",[e.following?e._e():o("q-btn",{staticClass:"q-ma-sm",attrs:{dense:"",color:"positive",label:"Seguir"},on:{click:function(t){return e.follow(!0)}}})],1),9===e.account.role?o("q-btn",{attrs:{color:"primary","aria-label":"Mensagem",icon:"email",label:"Notificar"},on:{click:function(t){return e.$router.push({path:"notification",query:{user:e.page.user_id}})}}}):e._e()],1),e.page.about?o("div",{class:["q-ma-md text-left",{ellipsis:e.ellipsis}],on:{click:function(t){e.ellipsis=!e.ellipsis}}},[e._v("\n      "+e._s(e.page.about)+"\n    ")]):e._e(),o("q-separator"),o("div",{staticClass:"relative-position"},[o("grid",{ref:"grider",attrs:{remove:9===e.account.role,page:e.page,pause:e.showCarousel},on:{showCarousel:function(t){e.showCarousel=!0}}})],1)],1):e._e()],1)},a=[],s=(o("a434"),o("df3a")),n=o("454f"),c=o("b06b"),l=o("81c3");const{FCMPlugin:r}=l["b"];var g={name:"Profile",components:{Avatar:s["a"],Grid:n["a"]},data:()=>({page:null,following:null,ellipsis:!0,showCarousel:!1,account:{role:1,pro:0}}),watch:{showCarousel:function(e){e?this.hideAd():this.showAd()}},created(){if(localStorage.getItem("account")){this.account=this.$storage.getObj("account");const e=this.account.following.findIndex(e=>e.page===Number(this.$route.query.id));e>-1&&(this.following=this.account.following[e])}else{const e=this.$storage.getObj("following"),t=e.findIndex(e=>e.page===Number(this.$route.query.id));t>-1&&(this.following=e[t])}this.$axios.get("/page/"+this.$route.query.id).then(e=>{this.page=e.data.page})},mounted(){this.showAd()},beforeDestroy(){this.hideAd()},methods:{showAd:function(){this.account.pro||window.admob.banner.show({id:{android:"ca-app-pub-7877878592385970/5262745096",ios:"ca-app-pub-7877878592385970/5262745096"},size:{width:320,height:50}})},hideAd:function(){this.account.pro||window.admob.banner.hide({android:"ca-app-pub-7877878592385970/5262745096",ios:"ca-app-pub-7877878592385970/5262745096"})},goUrl:function(){this.$q.dialog({message:"Você está prestes a deixar o aplicativo para acessar uma página externa.",cancel:"Cancelar",ok:"Confirmar"}).onOk(()=>{Object(c["a"])(this.page.link)})},follow:function(e){e?localStorage.getItem("account")?this.$axios.post("following/"+this.page.id).then(e=>{this.addFollow()}):this.addFollow():localStorage.getItem("account")?this.$axios.delete("following/"+this.page.id).then(e=>{this.removeFollow()}):this.removeFollow()},addFollow:function(){if(localStorage.getItem("account")){const e=this.$storage.getObj("account");e.following[e.following.length]={page:this.page.id,notification:1},this.$storage.setObj("account",e)}else{const e=this.$storage.getObj("following");e[e.length]={page:this.page.id,notification:1},this.$storage.setObj("following",e)}this.following={page:this.page.id,notification:1},this.$axios.get(`page/${[this.page.id]}/6`).then(e=>{this.$store.commit("pages/unshiftFavorites",e.data.page),this.$store.commit("pages/setStartedFavorites",[0,0])}),this.notify(!0)},removeFollow:function(){if(localStorage.getItem("account")){const e=this.$storage.getObj("account");e.following.splice(e.following.findIndex(e=>e.page===this.page.id),1),this.$storage.setObj("account",e)}else{const e=this.$storage.getObj("following");e.splice(e.findIndex(e=>e.page===this.page.id),1),this.$storage.setObj("following",e)}this.following=null,this.$store.commit("pages/removeFavorite",this.page),this.$store.commit("pages/setStartedFavorites",[0,0]),this.notify(!1)},notify:function(e){const t=e?1:0;if(localStorage.getItem("account"))this.$axios.put("following/"+this.page.id,{notification:t}).then(e=>{const o=this.$storage.getObj("account"),i=o.following.findIndex(e=>e.page===this.page.id);i>-1&&(this.following.notification=t,o.following[i].notification=t,this.$storage.setObj("account",o))});else{const e=this.$storage.getObj("following"),o=e.findIndex(e=>e.page===this.page.id);o>-1&&(this.following.notification=t,e[o].notification=t,this.$storage.setObj("following",e))}e?r.subscribeTo({topic:this.page.fcm_topic}).then(e=>{this.$q.notify({type:"positive",position:"top",message:"Você receberá notificações desta página"})}).catch(e=>console.error(e)):r.unsubscribeFrom({topic:this.page.fcm_topic}).then(e=>{this.$q.notify({type:"warning",position:"top",message:"Você não receberá notificações desta página"})}).catch(e=>console.error(e))},denounce:function(e){this.$q.dialog({title:"Denunciar página!",message:"Escreva um texto com os motivos da denúncia (mínimo de 10 caracteres):",prompt:{model:"",isValid:e=>e.length>10,type:"textarea"},cancel:!0,persistent:!0}).onOk(t=>{this.$axios.post("denounce/page/"+e,{denounce:t})})}}},p=g,u=o("2877"),h=o("e359"),d=o("65c6"),f=o("9c40"),w=o("2c91"),m=o("4e73"),b=o("1c1c"),v=o("66e5"),$=o("4074"),q=o("09e3"),x=o("0016"),_=o("eb85"),k=o("7f67"),C=o("eebe"),y=o.n(C),O=Object(u["a"])(p,i,a,!1,null,null,null);t["default"]=O.exports;y()(O,"components",{QHeader:h["a"],QToolbar:d["a"],QBtn:f["a"],QSpace:w["a"],QMenu:m["a"],QList:b["a"],QItem:v["a"],QItemSection:$["a"],QPageContainer:q["a"],QIcon:x["a"],QSeparator:_["a"]}),y()(O,"directives",{ClosePopup:k["a"]})}}]);